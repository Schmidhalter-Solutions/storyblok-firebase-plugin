# Storyblok Category Selector Plugin

A Storyblok field plugin that allows users to select categories from a Firebase Firestore database. The plugin displays categories in a checkbox list format and outputs the selected category slugs.

## Features

- Fetches categories from Firebase Firestore
- Displays categories in a user-friendly checkbox list
- Supports multiple category selection
- Outputs category slugs instead of IDs
- Maintains selection state in Storyblok
- Responsive and accessible UI

## Prerequisites

- Node.js (v14 or higher)
- npm or yarn
- A Firebase project with Firestore enabled
- Storyblok account with a space

## Installation

1. Clone the repository:
```bash
git clone [repository-url]
cd friendly-fish-storyblok-plugins
```

2. Install dependencies:
```bash
npm install
```

3. Set up environment variables:
Create a `.env` file in the `packages/category-selector` directory with the following variables:

```env
VITE_FIREBASE_API_KEY=your_api_key
VITE_FIREBASE_AUTH_DOMAIN=your_auth_domain
VITE_FIREBASE_PROJECT_ID=your_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_storage_bucket
VITE_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id
VITE_FIREBASE_APP_ID=your_app_id
VITE_FIREBASE_MEASUREMENT_ID=your_measurement_id
VITE_FIREBASE_REGION=your_region
VITE_FIREBASE_ZONE=your_zone
```

## Firebase Setup

1. Create a new Firebase project in the [Firebase Console](https://console.firebase.google.com/)
2. Enable Firestore Database
3. Create a collection named `categories` with the following document structure:
```typescript
interface Category {
  id: string;          // Auto-generated by Firestore
  name: {
    en: string;        // Category name in English
  };
  slug: string;        // URL-friendly version of the name
  order?: number;      // Optional: for custom sorting
}
```

## Development

1. Start the development server:
```bash
npm run dev
```

2. The plugin will be available at `http://localhost:3000`

## Building and Deployment

1. Build the plugin:
```bash
npm run build
```

2. Deploy to Storyblok:
```bash
npm run deploy
```

## Usage in Storyblok

1. In your Storyblok space, create a new field type:
   - Name: Category Selector
   - Type: Custom
   - Plugin: [Your deployed plugin URL]

2. Add the field to your content type:
   - The field will output an array of selected category slugs
   - You can use these slugs in your frontend to filter or display content

## Example Usage in Frontend

```typescript
// Example of how to use the selected categories in your frontend
interface StoryblokContent {
  selected_categories: string[]; // Array of category slugs
}

// Filter content based on selected categories
const filteredContent = allContent.filter(item => 
  selectedCategories.includes(item.category_slug)
);
```

## Security Considerations

1. The Firebase configuration is stored in environment variables
2. Make sure to set up proper Firebase security rules
3. Never commit the `.env` file to version control
4. Use the `.env.example` file as a template for other developers

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## License

[Your License]

## Support

For support, please [create an issue](repository-issues-url) in the repository.
